name: CI/CD

on:
  push:
    branches:
      - dev

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Install dependencies
        run: npm install

      - name: Build application
        run: npm run build

      - name: Deploy to DigitalOcean
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.HOST }}
          username: ${{ secrets.USER }}
          # password: ${{ secrets.PASSWORD }}
          ssh_private_key: |
            -----BEGIN OPENSSH PRIVATE KEY-----\n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\n24SAF7vaDcsAAAAJY2ljZF90ZXN0AQI=\n-----END OPENSSH PRIVATE KEY-----\n
          port: 22
          script: |
            ls
